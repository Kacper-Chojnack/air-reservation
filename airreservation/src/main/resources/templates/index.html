<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Strona główna</title>
</head>
<body>

<div style="padding: 10px;">
    <a th:href="@{/}" style="text-decoration: none; display: flex; align-items: center; gap: 10px;">
        <img th:src="@{/images/logo.png}" alt="Logo" style="height: 40px;">
        <span style="font-size: 24px; font-weight: bold; color: black;">AirReservation</span>
    </a>

</div><h1>Loty: </h1>

<div style="margin-bottom: 20px;">
    <form th:action="@{/createPassengerForm}" method="get" style="display: inline;">
        <button type="submit">Utwórz pasażera</button>
    </form>
    <form th:action="@{/createFlightForm}" method="get" style="display: inline;">
        <button type="submit">Utwórz lot</button>
    </form>
   <form th:action="@{/createReservationForm}" method="get">
    <input type="hidden" th:name="flightId" th:value="${flight.id}" />
    <button type="submit">Zarezerwuj</button>
</form>
</div>

<div th:if="${#lists.isEmpty(flights)}">
    <p>Brak dostępnych lotów.</p>
</div>

<table th:unless="${#lists.isEmpty(flights)}" border="1" cellpadding="10" cellspacing="0" style="width:100%; border-collapse: collapse;">
    <thead>
    <tr>
        <th>Lot z</th>
        <th>Lot do</th>
        <th>Data wylotu</th>
        <th>Długość lotu</th>
        <th>Status</th>
        <th>Akcja</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="flight : ${flights}">
        <td th:text="${flight.departureAirport.name}">Lotnisko wylotu</td>
        <td th:text="${flight.arrivalAirport.name}">Lotnisko przylotu</td>
        <td th:text="${#temporals.format(flight.departureDate, 'yyyy-MM-dd HH:mm')}">Data wylotu</td>
        <td th:text="${flight.formattedDuration}">Długość lotu</td>
        <td>
            <span th:if="${flight.departed}">Wystartował</span>
            <span th:unless="${flight.departed}">Czeka na wystartowanie</span>
        </td>
        <td>
            <form th:if="${!flight.departed}" th:action="@{/createReservationForm}" method="get">
                <input type="hidden" th:name="flightId" th:value="${flight.id}"/>
                <button type="submit">Zarezerwuj</button>
            </form>
            <form th:if="${flight.departed}" th:action="@{/createReservationForm}" method="get">
                <input type="hidden" th:name="flightId" th:value="${flight.id}"/>
                <button type="submit" disabled>Rezerwacja niemożliwa</button>
            </form>
        </td>
    </tr>
    </tbody>
</table>

</div>
</body>
</html>